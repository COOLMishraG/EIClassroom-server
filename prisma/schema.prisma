datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Teacher {
  id        Int      @id @default(autoincrement())
  firstName String
  lastName  String
  email     String   @unique
  password  String
  subjects  Subject[]
  sheets    Sheet[]
}

model Subject {
  code      String    @id 
  name      String
  teacher   Teacher   @relation(fields: [teacherId], references: [id])
  teacherId Int
  sheets    Sheet[]
}

model Sheet {
  id               String    // Part of composite primary key
  subjectCode      String    // Part of composite primary key
  name             String
  subject          Subject   @relation(fields: [subjectCode], references: [code])
  teacher          Teacher   @relation(fields: [teacherId], references: [id])
  teacherId        Int
  MST1             Mst?      // Reference to Mst model
  MST2             Mst?      // Reference to Mst model
  Quiz_Assignment  Assignment?      //Reference to Assignment model
  EndSem           EndSem?      // Reference to EndSem model

  @@id([id, subjectCode]) // Composite primary key
}

enum CO {
  CO1
  CO2
  CO3
  CO4
  CO5
}

model Mst {
  id         Int    @id @default(autoincrement())
  Question1  COs
  Question2  COs
  Question3  COs
}
model EndSem {
  id         Int    @id @default(autoincrement())
  Question1  COs
  Question2  COs
  Question3  COs
  Question4  COs
  Question5  COs
}

model COs {
  id         Int    @id @default(autoincrement())
  CO1        CO
  CO1Marks   Int? // Marks for CO1
  CO2        CO
  CO2Marks   Int? // Marks for CO2
  CO3        CO
  CO3Marks   Int? // Marks for CO3
  CO4        CO
  CO4Marks   Int? // Marks for CO4
  CO5        CO
  CO5Marks   Int? // Marks for CO5
}

model Assignment {
  id             Int    @id @default(autoincrement())
  sheetId       String
  AssignmentMarks Int?
  CO1Checked     Boolean @default(false)
  CO2Checked     Boolean @default(false)
  CO3Checked     Boolean @default(false)
  CO4Checked     Boolean @default(false)
  CO5Checked     Boolean @default(false)
  sheet          Sheet   @relation(fields: [sheetId], references: [id])
}
